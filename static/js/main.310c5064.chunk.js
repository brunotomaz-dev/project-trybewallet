(this["webpackJsonpproject-trybewallet"]=this["webpackJsonpproject-trybewallet"]||[]).push([[0],{35:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),i=a.n(l),o=a(20),c=(a(35),a(11)),s=a(2),u=a(15),d=a(8),m=a(9),p=a(10),h=a(12),b=(a(40),a.p+"static/media/trybe_logo.6457a2c3.png"),f="set user email",E="set expenses data",v="get currencies",g="remove expenses",y="change editor status",w="update expenses",j=function(e){return{type:y,editStatus:e}};function O(){return function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(e){return Object.keys(e).filter((function(e){return"USDT"!==e})).map((function(e){return e}))})).then((function(t){return e({type:v,currencies:t})}))}}function C(e){var t=e.expense,a=e.currency,n=e.method,r=e.tag,l=e.description;return function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(e){return{value:t,currency:a,method:n,tag:r,description:l,exchangeRates:e}})).then((function(t){return e({type:E,expenses:t})}))}}var x=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).validateMail=function(t){var a=function(t){return e.setState({isValidMail:t})};return a(!!/\S+@\S+\.\S+/.test(t))},e.handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n),(function(){return e.validateChar()}))},e.validateChar=function(){var t=e.state,a=t.email,n=t.password,r=t.isValidMail,l=!1;e.validateMail(a),n.length>5&&r&&(l=!0);var i=function(t,a){return e.setState({isDisabled:t,buttonClass:a})};return l?i(!1,"loginButton"):i(!0,"disabled")},e.handleClick=function(){var t=e.props,a=t.emailDispatch,n=t.history;a(e.state.email),e.setState({email:"",password:""}),n.push("/carteira")},e.state={isValidMail:!1,email:"",password:"",isDisabled:!0,buttonClass:"disabled"},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.body.style.backgroundColor="#5f7e42"}},{key:"render",value:function(){var e=this.state,t=e.email,a=e.password,n=e.isDisabled,l=e.buttonClass;return r.a.createElement("section",{className:"login"},r.a.createElement("img",{src:b,alt:"trybe",className:"loginLogo"}),r.a.createElement("label",{htmlFor:"email"},r.a.createElement("input",{type:"email",name:"email",id:"email",placeholder:"Email","data-testid":"email-input",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"password"},r.a.createElement("input",{type:"password",name:"password",id:"password",placeholder:"Senha","data-testid":"password-input",value:a,onChange:this.handleChange})),r.a.createElement("button",{type:"button",className:l,disabled:n,onClick:this.handleClick},"Entrar"))}}]),a}(r.a.Component),k=Object(c.b)(null,(function(e){return{emailDispatch:function(t){e({type:f,email:t})}}}))(x),N=a(13),S=a(29),D=a(30),M=a(3),T={email:""},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments.length>1?arguments[1]:void 0;return t.type===f?Object(M.a)(Object(M.a)({},e),{},{email:t.email}):e},B=a(24),A={currencies:[],expenses:[],editor:!1,idToEdit:0},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,t=arguments.length>1?arguments[1]:void 0,a=function(){return e.expenses.length>0?e.expenses.length:0};switch(t.type){case v:return Object(M.a)(Object(M.a)({},e),{},{currencies:t.currencies});case E:return Object(M.a)(Object(M.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses),[Object(M.a)({id:a()},t.expenses)])});case w:return Object(M.a)(Object(M.a)({},e),{},{expenses:[].concat(Object(B.a)(e.expenses.filter((function(e){return t.expenses.id!==e.id}))),[t.expenses])});case g:return Object(M.a)(Object(M.a)({},e),{},{expenses:t.expenses});case y:return Object(M.a)(Object(M.a)({},e),t.editStatus);default:return e}},V=Object(N.combineReducers)({user:F,wallet:R}),L=Object(N.createStore)(V,Object(S.composeWithDevTools)(Object(N.applyMiddleware)(D.a)));window.Cypress&&(window.store=L);var z=L,I=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleTotal=function(){var t=z.getState().wallet.expenses,a=0;t.map((function(e){var t=e.exchangeRates,n=e.value,r=e.currency,l=n*Object.entries(t).filter((function(e){return e.includes(r)}))[0][1].ask;return a+=l})),e.setState({total:a.toFixed(2)})},e.unsubscribe=function(){z.subscribe(e.handleTotal)},e.state={total:0},e}return Object(m.a)(a,[{key:"render",value:function(){this.unsubscribe();var e=this.props.userMail,t=this.state.total;return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("img",{src:b,alt:"Trybe Logo"})),r.a.createElement("div",{"data-testid":"email-field"},"Email:"," ",e),r.a.createElement("div",null,"R$",r.a.createElement("div",{"data-testid":"total-field"},t)),r.a.createElement("div",{"data-testid":"header-currency-field"},"BRL"))}}]),a}(n.Component),W=Object(c.b)((function(e){return{userMail:e.user.email}}))(I),H=(a(41),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;Object(d.a)(this,a);for(var n=arguments.length,l=new Array(n),i=0;i<n;i++)l[i]=arguments[i];return(e=t.call.apply(t,[this].concat(l))).tableHeader=function(){return["Descri\xe7\xe3o","Tag","M\xe9todo de pagamento","Valor","Moeda","C\xe2mbio utilizado","Valor convertido","Moeda de convers\xe3o","Editar/Excluir"].map((function(e){return r.a.createElement("th",{key:e},e)}))},e.tableBody=function(){var t=e.props.walletExpenses;return t.sort((function(e,t){return e.id<t.id?-1:e.id>t.id?1:0})).map((function(t){var a=t.currency,n=t.description,l=t.exchangeRates,i=t.id,o=t.method,c=t.tag,s=t.value,u=Object.entries(l).filter((function(e){return e.includes(a)}))[0][1],d=u.ask,m=u.name,p=Number(s)*Number(d);return r.a.createElement("tr",{key:i},r.a.createElement("td",null,n),r.a.createElement("td",null,c),r.a.createElement("td",null,o),r.a.createElement("td",null,Number(s).toFixed(2)),r.a.createElement("td",null,m),r.a.createElement("td",null,Number(d).toFixed(2)),r.a.createElement("td",null,p.toFixed(2)),r.a.createElement("td",null,"Real"),r.a.createElement("td",null,r.a.createElement("button",{className:"delete-btn",type:"button","data-testid":"delete-btn",onClick:function(){return e.handleDeleteButton(i)}},"Excluir"),r.a.createElement("button",{className:"edit-btn",type:"button","data-testid":"edit-btn",onClick:function(){return e.handleEditButton(i)}},"Editar")))}))},e.handleEditButton=function(t){(0,e.props.editorStatus)({idToEdit:t,editor:!0})},e.handleDeleteButton=function(t){var a=e.props,n=a.walletExpenses;(0,a.removeItems)(n.filter((function(e){return t!==e.id})))},e}return Object(m.a)(a,[{key:"render",value:function(){return r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,this.tableHeader())),r.a.createElement("tbody",null,this.tableBody()))}}]),a}(n.Component)),J=Object(c.b)((function(e){return{walletExpenses:e.wallet.expenses}}),(function(e){return{removeItems:function(t){e({type:g,expenses:t})},editorStatus:function(t){e(j(t))}}}))(H),U=function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(d.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.value,r=a.name;e.setState(Object(u.a)({},r,n))},e.handleClick=function(){(0,e.props.fetchExchange)(e.state),e.setState({expense:"",description:""})},e.handleEditClick=function(){var t=e.props,a=t.editorStatus,n=t.updateDispatch,r=t.wallet,l=r.expenses,i=r.idToEdit,o=e.state,c=o.expense,s=o.description,u=o.currency,d=o.method,m=o.tag,p=l.filter((function(e){return i===e.id}));n(Object(M.a)(Object(M.a)({},p[0]),{},{value:c,description:s,currency:u,method:d,tag:m})),a({idToEdit:0,editor:!1}),e.setState({expense:"",description:""})},e.mountSelect=function(){return e.props.wallet.currencies.map((function(e){return r.a.createElement("option",{className:"wallet-option",key:e,value:e},e)}))},e.buttonAdd=function(){return r.a.createElement("button",{className:"wallet-button",type:"button",onClick:e.handleClick},"Adicionar Despesa")},e.buttonEdit=function(){return r.a.createElement("button",{className:"wallet-button",type:"button",onClick:e.handleEditClick},"Editar despesa")},e.state={expense:"",description:"",currency:"USD",method:"Dinheiro",tag:"Alimenta\xe7\xe3o"},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){(0,this.props.fetchCurrencies)()}},{key:"render",value:function(){var e=this.state,t=e.expense,a=e.description,n=e.currency,l=this.props.wallet.editor;return r.a.createElement("div",{className:"wallet-form"},r.a.createElement("label",{htmlFor:"expense"},"Valor:"," ",r.a.createElement("input",{className:"wallet","data-testid":"value-input",type:"number",name:"expense",id:"expense",value:t,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"description"},"Descri\xe7\xe3o:"," ",r.a.createElement("input",{className:"wallet","data-testid":"description-input",type:"text",name:"description",id:"description",value:a,onChange:this.handleChange})),r.a.createElement("label",{htmlFor:"currency"},"Moeda:"," ",r.a.createElement("select",{className:"wallet","data-testid":"currency-input",name:"currency",id:"currency",value:n,onChange:this.handleChange},this.mountSelect())),r.a.createElement("label",{htmlFor:"method"},"M\xe9todo de Pagamento:"," ",r.a.createElement("select",{className:"wallet","data-testid":"method-input",name:"method",id:"method",onChange:this.handleChange},r.a.createElement("option",{className:"wallet-option",value:"Dinheiro"},"Dinheiro"),r.a.createElement("option",{className:"wallet-option",value:"Cart\xe3o de cr\xe9dito"},"Cart\xe3o de cr\xe9dito"),r.a.createElement("option",{className:"wallet-option",value:"Cart\xe3o de d\xe9bito"},"Cart\xe3o de d\xe9bito"))),r.a.createElement("label",{htmlFor:"tag"},"Categoria:"," ",r.a.createElement("select",{className:"wallet","data-testid":"tag-input",name:"tag",id:"tag",onChange:this.handleChange},r.a.createElement("option",{className:"wallet-option",value:"Alimenta\xe7\xe3o"},"Alimenta\xe7\xe3o"),r.a.createElement("option",{className:"wallet-option",value:"Lazer"},"Lazer"),r.a.createElement("option",{className:"wallet-option",value:"Trabalho"},"Trabalho"),r.a.createElement("option",{className:"wallet-option",value:"Transporte"},"Transporte"),r.a.createElement("option",{className:"wallet-option",value:"Sa\xfade"},"Sa\xfade"))),l?this.buttonEdit():this.buttonAdd())}}]),a}(n.Component),$=Object(c.b)((function(e){return{wallet:e.wallet}}),(function(e){return{fetchCurrencies:function(){e(O())},fetchExchange:function(t){e(C(t))},updateDispatch:function(t){e({type:w,expenses:t})},editorStatus:function(t){e(j(t))}}}))(U),P=(a(42),function(e){Object(p.a)(a,e);var t=Object(h.a)(a);function a(){return Object(d.a)(this,a),t.apply(this,arguments)}return Object(m.a)(a,[{key:"componentDidMount",value:function(){document.body.style.backgroundColor="white"}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(W,null),r.a.createElement($,null),r.a.createElement("h2",null,"Tabela de Despesas"),r.a.createElement(J,null))}}]),a}(r.a.Component)),_=P;var q=function(){return r.a.createElement("div",null,r.a.createElement(s.c,null,r.a.createElement(s.a,{path:"/",exact:!0,component:k}),r.a.createElement(s.a,{path:"/carteira",component:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(o.a,null,r.a.createElement(c.a,{store:z},r.a.createElement(q,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[48,1,2]]]);
//# sourceMappingURL=main.310c5064.chunk.js.map